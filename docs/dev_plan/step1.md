# Step 1: åŸºç¡€æ¶æ„æ­å»º (v0.1.x)

## ğŸ“‹ é˜¶æ®µæ¦‚è¿°
- **é˜¶æ®µç›®æ ‡**: æ­å»ºé¡¹ç›®åŸºç¡€æ¶æ„ï¼Œå»ºç«‹å¼€å‘ç¯å¢ƒå’ŒåŸºç¡€æœåŠ¡æ¡†æ¶
- **é¢„è®¡æ—¶é—´**: 2025-01-26 ~ 2025-02-02 (1å‘¨)
- **å…³é”®äº¤ä»˜**: å¯è¿è¡Œçš„åŸºç¡€WebæœåŠ¡ã€æ•°æ®åº“è¿æ¥ã€é¡¹ç›®æ¶æ„

## ğŸ¯ è¯¦ç»†ä»»åŠ¡

### ä»»åŠ¡1: é¡¹ç›®åˆå§‹åŒ–ä¸åŸºç¡€é…ç½®
- **åˆ†æ”¯**: `xucheng/feature/v0.1/init-project-structure`
- **è´Ÿè´£äºº**: xucheng
- **é¢„è®¡æ—¶é—´**: 1-2å¤©

#### å¼€å‘ç›®æ ‡
- [x] åˆ›å»ºå¼€å‘åˆ†æ”¯
- [x] æ­å»ºGoé¡¹ç›®åŸºç¡€æ¶æ„
- [x] é…ç½®Go moduleså’Œä¾èµ–ç®¡ç†
- [x] åˆ›å»ºæ ‡å‡†çš„é¡¹ç›®ç›®å½•ç»“æ„
- [x] é…ç½®åŸºç¡€çš„å¼€å‘ç¯å¢ƒ

#### è¯¦ç»†ä»»åŠ¡æ¸…å•
- [x] åˆå§‹åŒ–go.modæ–‡ä»¶ï¼Œé…ç½®é¡¹ç›®ä¾èµ–
- [x] åˆ›å»ºå®Œæ•´çš„ç›®å½•ç»“æ„ï¼ˆæŒ‰ç…§TDæ–‡æ¡£è§„èŒƒï¼‰
- [x] ç¼–å†™åŸºç¡€çš„main.goå…¥å£æ–‡ä»¶
- [x] é…ç½®å¼€å‘å’Œç”Ÿäº§ç¯å¢ƒé…ç½®æ–‡ä»¶
- [x] åˆ›å»ºåŸºç¡€çš„Makefileæˆ–æ„å»ºè„šæœ¬
- [x] é…ç½®.gitignoreæ–‡ä»¶

#### äº¤ä»˜ç‰©
- [x] å¼€å‘åˆ†æ”¯åˆ›å»º
- [x] å®Œæ•´çš„é¡¹ç›®ç›®å½•ç»“æ„
- [x] go.modé…ç½®æ–‡ä»¶
- [x] åŸºç¡€çš„main.goå…¥å£æ–‡ä»¶
- [x] å¼€å‘ç¯å¢ƒé…ç½®æ–‡ä»¶
- [x] æ„å»ºå’Œå¼€å‘è„šæœ¬

#### é¡¹ç›®ç›®å½•ç»“æ„
```
restart-life-api/
â”œâ”€â”€ cmd/
â”‚   â””â”€â”€ server/
â”‚       â””â”€â”€ main.go              # åº”ç”¨ç¨‹åºå…¥å£ç‚¹
â”œâ”€â”€ internal/
â”‚   â”œâ”€â”€ api/
â”‚   â”‚   â”œâ”€â”€ handlers/            # HTTPå¤„ç†å™¨
â”‚   â”‚   â”œâ”€â”€ middleware/          # ä¸­é—´ä»¶
â”‚   â”‚   â””â”€â”€ routes/              # è·¯ç”±å®šä¹‰
â”‚   â”œâ”€â”€ models/                  # æ•°æ®æ¨¡å‹
â”‚   â”œâ”€â”€ services/                # ä¸šåŠ¡é€»è¾‘æœåŠ¡
â”‚   â”œâ”€â”€ repository/              # æ•°æ®è®¿é—®å±‚
â”‚   â”‚   â”œâ”€â”€ postgres/
â”‚   â”‚   â””â”€â”€ redis/
â”‚   â””â”€â”€ config/                  # é…ç½®ç®¡ç†
â”œâ”€â”€ pkg/
â”‚   â”œâ”€â”€ utils/                   # å·¥å…·å‡½æ•°
â”‚   â””â”€â”€ database/                # æ•°æ®åº“è¿æ¥
â”œâ”€â”€ migrations/                  # æ•°æ®åº“è¿ç§»æ–‡ä»¶
â”œâ”€â”€ docs/                        # APIæ–‡æ¡£
â”œâ”€â”€ docker/
â”‚   â””â”€â”€ Dockerfile
â”œâ”€â”€ configs/                     # é…ç½®æ–‡ä»¶
â”œâ”€â”€ scripts/                     # æ„å»ºè„šæœ¬
â”œâ”€â”€ go.mod
â”œâ”€â”€ go.sum
â”œâ”€â”€ Makefile
â””â”€â”€ README.md
```

---

### ä»»åŠ¡2: æ•°æ®åº“è®¾è®¡ä¸è¿æ¥
- **åˆ†æ”¯**: `xucheng/feature/v0.1/database-setup`
- **è´Ÿè´£äºº**: xucheng
- **é¢„è®¡æ—¶é—´**: 2-3å¤©

#### å¼€å‘ç›®æ ‡
- [ ] PostgreSQLæ•°æ®åº“è¿æ¥é…ç½®
- [ ] Redisç¼“å­˜è¿æ¥é…ç½®
- [ ] æ•°æ®åº“è¿ç§»ç³»ç»Ÿæ­å»º
- [ ] æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„è®¾è®¡

#### è¯¦ç»†ä»»åŠ¡æ¸…å•
- [ ] å®ç°PostgreSQLè¿æ¥æ± ç®¡ç†
- [ ] å®ç°Redisè¿æ¥å’ŒåŸºç¡€æ“ä½œ
- [ ] åˆ›å»ºæ•°æ®åº“è¿ç§»ç³»ç»Ÿï¼ˆæ”¯æŒup/downï¼‰
- [ ] è®¾è®¡å¹¶å®ç°æ ¸å¿ƒæ•°æ®è¡¨ç»“æ„
- [ ] ç¼–å†™æ•°æ®åº“è¿æ¥å¥åº·æ£€æŸ¥
- [ ] é…ç½®æ•°æ®åº“è¿æ¥å‚æ•°å’Œç¯å¢ƒå˜é‡

#### äº¤ä»˜ç‰©
- [ ] æ•°æ®åº“è¿æ¥æ¨¡å— (`pkg/database/`)
- [ ] æ•°æ®åº“è¿ç§»è„šæœ¬ (`migrations/`)
- [ ] æ ¸å¿ƒè¡¨ç»“æ„SQLæ–‡ä»¶
- [ ] æ•°æ®åº“é…ç½®æ–‡æ¡£
- [ ] æ•°æ®åº“å¥åº·æ£€æŸ¥æ¥å£

#### æ ¸å¿ƒæ•°æ®è¡¨
```sql
-- ç”¨æˆ·è´¦æˆ·è¡¨
CREATE TABLE users (
    user_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    username VARCHAR(50) UNIQUE NOT NULL,
    email VARCHAR(255) UNIQUE NOT NULL,
    password_hash VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    last_login TIMESTAMP,
    is_active BOOLEAN DEFAULT true
);

-- æ¸¸æˆè§’è‰²è¡¨
CREATE TABLE characters (
    character_id UUID PRIMARY KEY DEFAULT gen_random_uuid(),
    user_id UUID NOT NULL REFERENCES users(user_id) ON DELETE CASCADE,
    character_name VARCHAR(100) NOT NULL,
    birth_country VARCHAR(100) NOT NULL,
    birth_year INTEGER NOT NULL,
    current_age INTEGER NOT NULL DEFAULT 0,
    gender VARCHAR(20) NOT NULL,
    race VARCHAR(50) NOT NULL,
    is_active BOOLEAN DEFAULT true,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

-- æ›´å¤šè¡¨ç»“æ„è§å®Œæ•´è¿ç§»æ–‡ä»¶...
```

---

### ä»»åŠ¡3: åŸºç¡€æœåŠ¡æ¡†æ¶
- **åˆ†æ”¯**: `xucheng/feature/v0.1/basic-framework`
- **è´Ÿè´£äºº**: xucheng
- **é¢„è®¡æ—¶é—´**: 2-3å¤©

#### å¼€å‘ç›®æ ‡
- [ ] Gin Webæ¡†æ¶é›†æˆ
- [ ] åŸºç¡€ä¸­é—´ä»¶å®ç°ï¼ˆCORSã€æ—¥å¿—ã€é”™è¯¯å¤„ç†ï¼‰
- [ ] é…ç½®ç®¡ç†ç³»ç»Ÿï¼ˆViperï¼‰
- [ ] å¥åº·æ£€æŸ¥æ¥å£

#### è¯¦ç»†ä»»åŠ¡æ¸…å•
- [ ] é›†æˆGinæ¡†æ¶ï¼Œé…ç½®åŸºç¡€è·¯ç”±
- [ ] å®ç°CORSä¸­é—´ä»¶ï¼Œæ”¯æŒè·¨åŸŸè¯·æ±‚
- [ ] å®ç°è¯·æ±‚æ—¥å¿—ä¸­é—´ä»¶
- [ ] å®ç°ç»Ÿä¸€é”™è¯¯å¤„ç†ä¸­é—´ä»¶
- [ ] å®ç°è¯·æ±‚æ¢å¤ä¸­é—´ä»¶ï¼ˆpanic recoveryï¼‰
- [ ] é›†æˆViperé…ç½®ç®¡ç†
- [ ] åˆ›å»ºé…ç½®æ–‡ä»¶æ¨¡æ¿ï¼ˆdev/prodç¯å¢ƒï¼‰
- [ ] å®ç°å¥åº·æ£€æŸ¥å’ŒæœåŠ¡çŠ¶æ€æ¥å£

#### äº¤ä»˜ç‰©
- [ ] å®Œæ•´çš„WebæœåŠ¡æ¡†æ¶
- [ ] ä¸­é—´ä»¶ç³»ç»Ÿ (`internal/api/middleware/`)
- [ ] é…ç½®ç®¡ç†æ¨¡å— (`internal/config/`)
- [ ] åŸºç¡€APIæ¥å£ (`/health`, `/ping`)
- [ ] æœåŠ¡å¯åŠ¨å’Œå…³é—­é€»è¾‘

#### åŸºç¡€ä¸­é—´ä»¶
```go
// ä¸­é—´ä»¶åˆ—è¡¨
- CORSä¸­é—´ä»¶ - è·¨åŸŸæ”¯æŒ
- Loggerä¸­é—´ä»¶ - è¯·æ±‚æ—¥å¿—
- Recoveryä¸­é—´ä»¶ - å¼‚å¸¸æ¢å¤
- RateLimitä¸­é—´ä»¶ - é™æµæ§åˆ¶
- RequestIDä¸­é—´ä»¶ - è¯·æ±‚è¿½è¸ª
```

#### å¥åº·æ£€æŸ¥æ¥å£
```
GET /health      - æœåŠ¡å¥åº·çŠ¶æ€
GET /ping        - åŸºç¡€è¿é€šæ€§æ£€æŸ¥
GET /ready       - æœåŠ¡å°±ç»ªçŠ¶æ€
GET /metrics     - åŸºç¡€æŒ‡æ ‡ä¿¡æ¯
```

---

## ğŸ“Š é˜¶æ®µéªŒæ”¶æ ‡å‡†

### åŠŸèƒ½éªŒæ”¶
- [ ] æœåŠ¡èƒ½æ­£å¸¸å¯åŠ¨å’Œå…³é—­
- [ ] æ•°æ®åº“è¿æ¥æ­£å¸¸ï¼Œèƒ½æ‰§è¡ŒåŸºç¡€CRUD
- [ ] Redisç¼“å­˜è¿æ¥æ­£å¸¸ï¼Œèƒ½è¯»å†™æ•°æ®
- [ ] å¥åº·æ£€æŸ¥æ¥å£è¿”å›æ­£ç¡®çŠ¶æ€
- [ ] åŸºç¡€ä¸­é—´ä»¶åŠŸèƒ½æ­£å¸¸

### æŠ€æœ¯éªŒæ”¶
- [ ] ä»£ç éµå¾ªGoè§„èŒƒï¼Œé€šè¿‡golintæ£€æŸ¥
- [ ] å•å…ƒæµ‹è¯•è¦†ç›–ç‡ > 70%
- [ ] æ‰€æœ‰é…ç½®é€šè¿‡ç¯å¢ƒå˜é‡ç®¡ç†
- [ ] æ—¥å¿—æ ¼å¼ç»Ÿä¸€ï¼ŒåŒ…å«å¿…è¦ä¿¡æ¯
- [ ] é”™è¯¯å¤„ç†ç»Ÿä¸€ï¼Œè¿”å›æ ‡å‡†æ ¼å¼

### æ–‡æ¡£éªŒæ”¶
- [ ] é¡¹ç›®READMEå®Œæ•´ï¼ŒåŒ…å«å¯åŠ¨è¯´æ˜
- [ ] APIæ–‡æ¡£åŸºç¡€æ¡†æ¶æ­å»ºå®Œæˆ
- [ ] æ•°æ®åº“è¿ç§»æ–‡æ¡£å®Œæˆ
- [ ] å¼€å‘ç¯å¢ƒæ­å»ºæ–‡æ¡£å®Œæˆ

---

## ğŸ”§ æŠ€æœ¯è§„èŒƒ

### ä¾èµ–ç®¡ç†
```go
// ä¸»è¦ä¾èµ–åŒ…
- github.com/gin-gonic/gin          // Webæ¡†æ¶
- github.com/lib/pq                 // PostgreSQLé©±åŠ¨
- github.com/go-redis/redis/v8      // Rediså®¢æˆ·ç«¯
- github.com/spf13/viper            // é…ç½®ç®¡ç†
- github.com/sirupsen/logrus        // æ—¥å¿—åº“
- github.com/golang-migrate/migrate // æ•°æ®åº“è¿ç§»
- github.com/google/uuid            // UUIDç”Ÿæˆ
```

### ä»£ç è§„èŒƒ
- ä½¿ç”¨gofmtæ ¼å¼åŒ–ä»£ç 
- éµå¾ªGoå®˜æ–¹å‘½åè§„èŒƒ
- æ¯ä¸ªå…¬å¼€å‡½æ•°éœ€è¦æ³¨é‡Š
- é”™è¯¯å¤„ç†ä¸èƒ½å¿½ç•¥
- å•å…ƒæµ‹è¯•æ–‡ä»¶å‘½åä¸º `*_test.go`

### é…ç½®è§„èŒƒ
```yaml
# config/development.yaml
server:
  port: 8080
  mode: debug
  
database:
  postgres:
    host: localhost
    port: 5432
    database: restart_life_dev
    username: postgres
    password: password
    sslmode: disable
    
  redis:
    host: localhost
    port: 6379
    password: ""
    database: 0
```

---

## â­ï¸ ä¸‹ä¸€æ­¥è®¡åˆ’

å®ŒæˆStep 1åï¼Œå°†è¿›å…¥Step 2ï¼šæ ¸å¿ƒä¸šåŠ¡æ¨¡å—å¼€å‘ (v0.2.x)
- ç”¨æˆ·è®¤è¯ç³»ç»Ÿ
- è§’è‰²ç®¡ç†ç³»ç»Ÿ  
- æ¸¸æˆæ ¸å¿ƒé€»è¾‘

---

*åˆ›å»ºæ—¶é—´: 2025-01-26*
*æœ€åæ›´æ–°: 2025-01-26*
